{"version":3,"sources":["services/settings-url.js","services/movieApi.js","utils/status.js","components/IdleView/IdleView.module.css","components/ErrorView/ErrorView.module.css","components/IdleView/searchMovies.jpg","components/IdleView/IdleView.jsx","components/ErrorView/error.png","components/ErrorView/ErrorView.jsx","components/Gallery/Gallery.jsx","components/Gallery/Gallery.module.css","components/SearchForm/SearchForm.module.css","components/SearchForm/SearchForm.jsx","views/MoviesPage/MoviesPage.jsx"],"names":["URL","BASE_URL","KEY","IMAGE","fetchWithErrorHandling","a","url","config","fetch","response","ok","json","Promise","reject","Error","fetchPopular","fetchMovieById","movieId","fetchSearchQuery","query","fetchCast","fetchReviews","Status","IDLE","PENDING","RESOLVED","REJECTED","module","exports","IdleView","className","s","idleView","role","src","background","alt","width","ErrorView","message","errorView","errorImage","Gallery","movies","location","useLocation","gallery","map","movie","item","id","to","state","from","image","poster_path","title","name","titleMovie","SearchForm","onSubmit","useState","setQuery","reset","searchForm","e","preventDefault","trim","toast","error","searchFormInput","type","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","disabled","searchFormButton","searchFormButtonLabel","MoviesPage","setMovies","status","setStatus","useEffect","fetchMovieAPI","then","data","results","length","catch","moviesPage","autoClose"],"mappings":"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","file":"static/js/movies-page.34325066.chunk.js","sourcesContent":["export const URL = {\r\n  BASE_URL: `https://api.themoviedb.org/3/`,\r\n  KEY: `c2855cd9e1605af870984c1963f9b27b`,\r\n  IMAGE: `https://image.tmdb.org/t/p/w300/`,\r\n};\r\n","import { URL } from './settings-url';\r\n\r\nasync function fetchWithErrorHandling(url = '', config = {}) {\r\n  const response = await fetch(url, config);\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error('Not found'));\r\n}\r\n\r\nexport function fetchPopular() {\r\n  return fetchWithErrorHandling(\r\n    `${URL.BASE_URL}trending/movie/day?api_key=${URL.KEY}`,\r\n  );\r\n}\r\n\r\nexport function fetchMovieById(movieId) {\r\n  return fetchWithErrorHandling(\r\n    `${URL.BASE_URL}movie/${movieId}?api_key=${URL.KEY}&language=en-US`,\r\n  );\r\n}\r\n\r\nexport function fetchSearchQuery(query) {\r\n  return fetchWithErrorHandling(\r\n    `${URL.BASE_URL}search/movie?api_key=${URL.KEY}&language=en-US&page=1&include_adult=false&query=${query}`,\r\n  );\r\n}\r\n\r\nexport function fetchCast(movieId) {\r\n  return fetchWithErrorHandling(\r\n    `${URL.BASE_URL}movie/${movieId}/credits?api_key=${URL.KEY}&language=en-US`,\r\n  );\r\n}\r\n\r\nexport function fetchReviews(movieId) {\r\n  return fetchWithErrorHandling(\r\n    `${URL.BASE_URL}movie/${movieId}/reviews?api_key=${URL.KEY}&language=en-US&page=1`,\r\n  );\r\n}\r\n","export const Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"idleView\":\"IdleView_idleView__1pjjz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorView\":\"ErrorView_errorView__3ypu7\"};","export default __webpack_public_path__ + \"static/media/searchMovies.bd5cf1e7.jpg\";","import background from './searchMovies.jpg';\r\nimport s from './IdleView.module.css';\r\n\r\nfunction IdleView() {\r\n  return (\r\n    <div className={s.idleView} role=\"alert\">\r\n      <img src={background} alt=\"Search\" width=\"700\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IdleView;\r\n","export default __webpack_public_path__ + \"static/media/error.c214a54e.png\";","import errorImage from './error.png';\r\nimport s from './ErrorView.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction ErrorView({ message }) {\r\n  return (\r\n    <div className={s.errorView} role=\"alert\">\r\n      <img src={errorImage} alt=\"error\" />\r\n      <h2>{message}</h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nErrorView.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ErrorView;\r\n","import { Link, useLocation } from 'react-router-dom';\r\nimport { URL } from '../../services/settings-url';\r\n\r\nimport s from './Gallery.module.css';\r\n\r\nfunction Gallery({ movies }) {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <ul className={s.gallery}>\r\n      {movies.map(movie => (\r\n        <li className={s.item} key={movie.id} id={movie.id}>\r\n          <Link to={`/movies/${movie.id}`} state={{ from: location }}>\r\n            <img\r\n              className={s.image}\r\n              src={`${URL.IMAGE}${movie.poster_path}`}\r\n              alt={movie.title || movie.name}\r\n            ></img>\r\n            <h3 className={s.titleMovie}>{movie.title || movie.name}</h3>\r\n          </Link>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default Gallery;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__12p9f\",\"item\":\"Gallery_item__1OFVZ\",\"titleMovie\":\"Gallery_titleMovie__3rrYA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"SearchForm_searchForm__2V8Y6\",\"searchFormInput\":\"SearchForm_searchFormInput__2SpGc\",\"searchFormButton\":\"SearchForm_searchFormButton__3bdio\",\"searchFormButtonLabel\":\"SearchForm_searchFormButtonLabel__34dUN\"};","import { useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport s from './SearchForm.module.css';\r\n\r\nfunction SearchForm({ onSubmit }) {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const handleChange = e => {\r\n    setQuery(e.currentTarget.value.toLowerCase());\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (query.trim() === '') {\r\n      toast.error('Enter the queryn');\r\n      setQuery('');\r\n      return;\r\n    }\r\n\r\n    onSubmit(query);\r\n    reset();\r\n  };\r\n\r\n  const reset = () => {\r\n    setQuery('');\r\n  };\r\n\r\n  return (\r\n    <form className={s.searchForm} onSubmit={handleSubmit}>\r\n      <input\r\n        className={s.searchFormInput}\r\n        type=\"text\"\r\n        autoComplete=\"off\"\r\n        autoFocus\r\n        placeholder=\"Search movies\"\r\n        value={query}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <button type=\"submit\" disabled={!query} className={s.searchFormButton}>\r\n        <span className={s.searchFormButtonLabel}>Search</span>\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default SearchForm;\r\n","import { useState, useEffect } from 'react';\r\nimport SearchForm from '../../components/SearchForm';\r\nimport Gallery from '../../components/Gallery/Gallery';\r\n\r\nimport * as fetchMovieAPI from '../../services/movieApi';\r\n\r\nimport { Status } from '../../utils/status';\r\nimport IdleView from 'components/IdleView/IdleView';\r\nimport ErrorView from 'components/ErrorView/ErrorView';\r\nimport Loading from 'components/Loader/Loader';\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport s from './MoviesPage.module.css';\r\n\r\nfunction MoviesPage() {\r\n  const [query, setQuery] = useState('');\r\n  const [movies, setMovies] = useState([]);\r\n  const [status, setStatus] = useState(Status.IDLE);\r\n\r\n  useEffect(() => {\r\n    if (!query) return;\r\n    setStatus(Status.PENDING);\r\n\r\n    fetchMovieAPI\r\n      .fetchSearchQuery(query)\r\n      .then(data => {\r\n        if (data.results.length === 0) {\r\n          throw new Error();\r\n        }\r\n        setMovies(data.results);\r\n        setStatus(Status.RESOLVED);\r\n      })\r\n      .catch(error => {\r\n        setStatus(Status.REJECTED);\r\n      });\r\n  }, [query]);\r\n\r\n  const onSubmit = query => {\r\n    setQuery(query);\r\n  };\r\n\r\n  if (status === Status.IDLE) {\r\n    return (\r\n      <>\r\n        <SearchForm onSubmit={onSubmit} />\r\n        <IdleView />\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (status === Status.PENDING) {\r\n    return <Loading />;\r\n  }\r\n\r\n  if (status === Status.REJECTED) {\r\n    return <ErrorView message={'Sorry we nothing found for you'} />;\r\n  }\r\n\r\n  if (status === Status.RESOLVED) {\r\n    return (\r\n      <div className={s.moviesPage}>\r\n        <SearchForm onSubmit={onSubmit} />\r\n        <Gallery movies={movies} />\r\n        <ToastContainer autoClose={3000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}